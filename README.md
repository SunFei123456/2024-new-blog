# 2024-new-blog
2024年新版博客,采用react + ts + tailwindcss + daisyui + axios 等技术栈开发.  


## bug修复 + 体验优化
9/24  
1. 图片回显采用前端来做, 之前的做法是上传之后后端返回响应url,渲染, 这样大大增加了服务器的请求次数,而且前端渲染起来也不友好
2. 使用Compressor库在图片上传至服务器前, 进行一次图片的压缩操作, 降低了服务器的压力
3. 个人文章模块的头像替换为个人的, 放在前端上面,默认的
4. 留言板模块输入的表情可以正常显示了,前面出问题是后端设置的DSN连接后面加上了字符集UTF8,而线上数据库因为mysql版本较低设置了utf8mb4字符集. 所以不一致导致了表情无法正常显示.


9/26
**修复 + UI优化**
1. 调整了进度记录的UI展示效果
2. 修复了website_module下的不同主题下文本色彩不匹配的问题

**功能添加**
1. 自定义了三个预设背景图片 + 三套适配该图片的主题色, 分别为自然风景,碧海蓝天,城市行人三套主题.
2. 配置面板允许用户在 默认主题色彩模式 和 背景图片主题模式 进行切换.

> 是否需要存储在数据库, 我想是没有必要在目前的设计下, 因为该site是完全公开的,不需要登录注册.
> 对于每个用户,他们修改了之后主题配置之后,这些信息将会存储在浏览器的本地localStorage中.如果用户不清楚该站点的本地存储信息的话, 那么下次登录依旧使用上吃配置的site config.


9/27
**修复 + UI优化**
1. 昨天部署之后,由于在本地存储的时候使用的是相对路径,而线上图片资源被打包后的命名发送了改变,所以切换时候找不到图片资源. 于是使用import方法导入图片资源,在本地存储的时候使用import 导入的图片变量这样可以避免.


**功能添加**
1. 个性化模块引入 三套预设字体. 允许用户自由选择站点内字体.


9/28
**修复 + UI优化**
1. 修复文章评论模块的背景颜色在图片背景模式下的不匹配
2. 修复了个性化配置的图片主题下的文字(主题名称)的颜色显示不确定的问题.


**功能添加**
1. 订阅频道,消息推送功能.

> 用户可以在设置里面订阅两个频道,(多选). 分别为 `每日热点新闻` + `每日天气情况 `


用户a,进入网站,打开设置, 开启抖音推送,---> 开启定时任务, 设置推送间隔 --> 刷新定时任务

用户a,再次进入网站,读取本地的推送设置,订阅频道,推送间隔 --> 请求接口 --> 开启定时任务. 没有则不开启定时任务.



> 推送间隔暂时放弃, 因为本网站是公开的， 无需登录注册. 所以无法记录每个用户的setting设置. 后端那边也无法记录> 用户设置的间隔时间. 所以暂时不做推送功能.
> 只设置开启推送的开关, 不设置推送间隔时间.